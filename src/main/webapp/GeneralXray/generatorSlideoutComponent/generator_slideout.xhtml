<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <ui:composition>        
        <h:outputStylesheet library="css" name="generator-slideout.css"/>

        <pe:slideout id="generatorInfoSlide" icon="fa fa-hand-o-right" location="right" widgetVar="slideoutHover"
                     handleStyleClass="hover-handle generator-info-panel" panelStyleClass="hover-panel" showOn="hover" offset="350px">
            <ui:include src="generator_slideout_panel.xhtml"/>
        </pe:slideout>

        <script>
            $(function () {
                addElement(0,0,0,0,0);
            });
            
           /**
            * Adds the divs that contains generator current state information to the Generator slideout 
            * @param {string} pw
            * @param {number} kv
            * @param {number} ma
            * @param {number} ms
            * @param {number} mx
            * @returns {undefined}             
            */
            function addElement(pw, kv, ma, ms, mx) {
                let generatorInfoPanel = $("#generatorInfoSlide_handle");
                generatorInfoPanel.html("");
                let pwValue = 'OFF';
                let powerClass = "generator-powerOff-state";
                console.log(pw);
                if (pw !== undefined ) {
                    if (pw){
                        pwValue = 'ON';
                        powerClass = "generator-powerOn-state";
                    }
                }

                let pwDiv = '<div id="pwDiv" class="'+powerClass+'"><p id="pwText">PW ' + pwValue + '</p></div>';
                let kvDiv = '<div id="kvDiv" class="generator-kv-state"><p id="kvText">KV <br/> ' + kv + '</p></div>';
                let msDiv = '<div id="maDiv" class="generator-ms-state"><p id="maText">MA <br/> ' + ma + '</p></div>';
                let maDiv = '<div id="msDiv" class="generator-ma-state"><p id="msText">MS <br/> ' + ms + '</p></div>';
                let mxDiv = '<div id="mxDiv" class="generator-mx-state"><p id="mxText">MX <br/> ' + mx + '</p></div>';
                generatorInfoPanel.append(mxDiv);
                generatorInfoPanel.append(maDiv);
                generatorInfoPanel.append(msDiv);
                generatorInfoPanel.append(kvDiv);
                generatorInfoPanel.append(pwDiv);
            }

        </script>
    </ui:composition>
</html>
